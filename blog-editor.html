<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post Editor | Vision79</title>
    <link rel="stylesheet" href="design-system.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Blog editor specific styles using design system tokens */
        .editor-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-xl);
        }
        
        .editor-header {
            background: var(--gradient-hero);
            color: var(--color-white);
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            position: relative;
            overflow: hidden;
        }
        
        .editor-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }
        
        .editor-header .container {
            position: relative;
            z-index: 2;
        }
        
        .editor-header h1 {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: var(--font-weight-bold);
            margin-bottom: var(--spacing-sm);
        }
        
        .editor-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .editor-form {
            background: var(--color-white);
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--color-light);
        }
        
        .form-group {
            margin-bottom: var(--spacing-lg);
        }
        
        .form-group label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-dark);
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: var(--spacing-md);
            border: 2px solid var(--color-light);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: var(--transition-normal);
            background: var(--color-white);
            font-family: var(--font-family);
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--color-secondary);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }
        
        .form-group textarea {
            min-height: 300px;
            resize: vertical;
            line-height: 1.6;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
        }
        
        .btn-group {
            display: flex;
            gap: var(--spacing-md);
            margin-top: var(--spacing-xl);
            flex-wrap: wrap;
        }
        
        .btn {
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: var(--font-weight-semibold);
            cursor: pointer;
            transition: var(--transition-normal);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-family: var(--font-family);
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: var(--color-white);
        }
        
        .btn-secondary {
            background: var(--color-light);
            color: var(--color-dark);
            border: 2px solid var(--color-light);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .preview-section {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-xl);
            background: var(--color-light);
            border-radius: var(--radius-lg);
            border: 2px dashed var(--color-gray);
        }
        
        .preview-section h3 {
            color: var(--color-dark);
            margin-bottom: var(--spacing-md);
        }
        
        .preview-content {
            background: var(--color-white);
            padding: var(--spacing-xl);
            border-radius: var(--radius-md);
            margin-top: var(--spacing-md);
            box-shadow: var(--shadow-sm);
        }
        
        .blog-list {
            margin-top: var(--spacing-3xl);
        }
        
        .blog-list h3 {
            color: var(--color-dark);
            margin-bottom: var(--spacing-lg);
            font-size: 1.5rem;
        }
        
        .blog-item {
            background: var(--color-white);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--shadow-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--color-light);
            transition: var(--transition-normal);
        }
        
        .blog-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .blog-item-info h3 {
            margin: 0 0 var(--spacing-sm) 0;
            color: var(--color-dark);
            font-size: 1.2rem;
        }
        
        .blog-item-meta {
            color: var(--color-gray);
            font-size: 0.9rem;
        }
        
        .blog-item-actions {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .btn-small {
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 0.9rem;
        }
        
        .btn-danger {
            background: var(--color-error);
            color: var(--color-white);
        }
        
        .btn-success {
            background: var(--color-success);
            color: var(--color-white);
        }
        
        .form-status {
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            font-weight: var(--font-weight-medium);
        }
        
        .form-status.success {
            background: rgba(5, 150, 105, 0.1);
            color: var(--color-success);
            border: 1px solid rgba(5, 150, 105, 0.2);
        }
        
        .form-status.error {
            background: rgba(220, 38, 38, 0.1);
            color: var(--color-error);
            border: 1px solid rgba(220, 38, 38, 0.2);
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            color: var(--color-secondary);
            text-decoration: none;
            font-weight: var(--font-weight-medium);
            margin-bottom: var(--spacing-lg);
            transition: var(--transition-normal);
        }
        
        .back-link:hover {
            color: var(--color-primary);
            transform: translateX(-4px);
        }
        
        @media (max-width: 768px) {
            .editor-container {
                padding: var(--spacing-md);
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .blog-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-md);
            }
            
            .blog-item-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <a href="blog.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Back to Blog
        </a>
        
        <div class="editor-header">
            <div class="container">
                <h1><i class="fas fa-edit"></i> Blog Post Editor</h1>
                <p>Create and manage blog posts for Vision79</p>
            </div>
        </div>
        
        <form class="editor-form" id="blogForm">
            <div id="formStatus"></div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="title">Post Title *</label>
                    <input type="text" id="title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="slug">URL Slug</label>
                    <input type="text" id="slug" name="slug" placeholder="auto-generated">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="category">Category *</label>
                    <select id="category" name="category" required>
                        <option value="">Select Category</option>
                        <option value="ai-solutions">AI Solutions</option>
                        <option value="caribbean-business">Caribbean Business</option>
                        <option value="digital-transformation">Digital Transformation</option>
                        <option value="case-studies">Case Studies</option>
                        <option value="tips-tricks">Tips & Tricks</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="author">Author *</label>
                    <input type="text" id="author" name="author" value="Vision79 Team" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="excerpt">Excerpt</label>
                <textarea id="excerpt" name="excerpt" rows="3" placeholder="Brief description of the post..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="content">Content *</label>
                <textarea id="content" name="content" rows="15" required placeholder="Write your blog post content here..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="tags">Tags</label>
                <input type="text" id="tags" name="tags" placeholder="ai, business, caribbean (comma separated)">
            </div>
            
            <div class="form-group">
                <label for="featuredImage">Featured Image URL</label>
                <input type="url" id="featuredImage" name="featuredImage" placeholder="https://example.com/image.jpg">
            </div>
            
            <div class="btn-group">
                <button type="button" class="btn btn-secondary" onclick="previewPost()">
                    <i class="fas fa-eye"></i> Preview
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Post
                </button>
            </div>
        </form>
        
        <div class="preview-section" id="previewSection" style="display: none;">
            <h3>Preview</h3>
            <div class="preview-content" id="previewContent">
                <!-- Preview content will be loaded here -->
            </div>
        </div>
        
        <div class="blog-list">
            <h3>Existing Posts</h3>
            <div id="blogList">
                <!-- Existing posts will be loaded here -->
            </div>
        </div>
    </div>

    <script src="enhanced-script.js"></script>
    <script>
        // Blog post management
        let blogPosts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
        let editingPost = null;

        // Auto-generate slug from title
        document.getElementById('title').addEventListener('input', function() {
            const title = this.value;
            const slug = title.toLowerCase()
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/(^-|-$)/g, '');
            document.getElementById('slug').value = slug;
        });

        // Preview functionality
        function previewPost() {
            const formData = getFormData();
            if (!formData.title || !formData.content) {
                showStatus('Please fill in the title and content to preview.', 'error');
                return;
            }

            const previewHTML = `
                <h2>${formData.title}</h2>
                <div class="post-meta">
                    <span><i class="fas fa-calendar"></i> ${new Date().toLocaleDateString()}</span>
                    <span><i class="fas fa-user"></i> ${formData.author}</span>
                    <span><i class="fas fa-folder"></i> ${formData.category}</span>
                </div>
                <div class="post-content">
                    ${formData.content.split('\n').map(paragraph => 
                        paragraph.trim() ? `<p>${paragraph}</p>` : ''
                    ).join('')}
                </div>
                ${formData.tags ? `
                    <div class="post-tags">
                        <strong>Tags:</strong> 
                        ${formData.tags.split(',').map(tag => 
                            `<span class="tag">${tag.trim()}</span>`
                        ).join('')}
                    </div>
                ` : ''}
            `;

            document.getElementById('previewContent').innerHTML = previewHTML;
            document.getElementById('previewSection').style.display = 'block';
            document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Form submission
        document.getElementById('blogForm').addEventListener('submit', function(e) {
            e.preventDefault();
            savePost();
        });

        function savePost() {
            const formData = getFormData();
            
            if (!formData.title || !formData.content || !formData.category || !formData.author) {
                showStatus('Please fill in all required fields.', 'error');
                return;
            }

            const post = {
                ...formData,
                date: new Date().toISOString(),
                id: editingPost ? editingPost.id : Date.now()
            };

            if (editingPost) {
                // Update existing post
                const index = blogPosts.findIndex(p => p.id === editingPost.id);
                if (index !== -1) {
                    blogPosts[index] = post;
                }
            } else {
                // Add new post
                blogPosts.unshift(post);
            }

            localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
            showStatus('Post saved successfully!', 'success');
            resetForm();
            loadBlogList();
        }

        function getFormData() {
            return {
                title: document.getElementById('title').value,
                slug: document.getElementById('slug').value,
                category: document.getElementById('category').value,
                author: document.getElementById('author').value,
                excerpt: document.getElementById('excerpt').value,
                content: document.getElementById('content').value,
                tags: document.getElementById('tags').value,
                featuredImage: document.getElementById('featuredImage').value
            };
        }

        function resetForm() {
            document.getElementById('blogForm').reset();
            editingPost = null;
            document.querySelector('.btn-primary').innerHTML = '<i class="fas fa-save"></i> Save Post';
            document.getElementById('previewSection').style.display = 'none';
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('formStatus');
            statusDiv.innerHTML = `<div class="form-status ${type}">${message}</div>`;
            setTimeout(() => {
                statusDiv.innerHTML = '';
            }, 5000);
        }

        function loadBlogList() {
            const blogList = document.getElementById('blogList');
            blogList.innerHTML = '';

            if (blogPosts.length === 0) {
                blogList.innerHTML = '<p>No blog posts yet. Create your first post above!</p>';
                return;
            }

            blogPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'blog-item';
                postElement.innerHTML = `
                    <div class="blog-item-info">
                        <h3>${post.title}</h3>
                        <div class="blog-item-meta">
                            <span><i class="fas fa-calendar"></i> ${new Date(post.date).toLocaleDateString()}</span>
                            <span><i class="fas fa-user"></i> ${post.author}</span>
                            <span><i class="fas fa-folder"></i> ${post.category}</span>
                        </div>
                    </div>
                    <div class="blog-item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editPost(${post.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deletePost(${post.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                blogList.appendChild(postElement);
            });
        }

        function editPost(id) {
            const post = blogPosts.find(p => p.id === id);
            if (!post) return;

            editingPost = post;
            document.getElementById('title').value = post.title;
            document.getElementById('slug').value = post.slug;
            document.getElementById('category').value = post.category;
            document.getElementById('author').value = post.author;
            document.getElementById('excerpt').value = post.excerpt || '';
            document.getElementById('content').value = post.content;
            document.getElementById('tags').value = post.tags || '';
            document.getElementById('featuredImage').value = post.featuredImage || '';

            document.querySelector('.btn-primary').innerHTML = '<i class="fas fa-save"></i> Update Post';
            document.getElementById('title').scrollIntoView({ behavior: 'smooth' });
        }

        function deletePost(id) {
            if (confirm('Are you sure you want to delete this post?')) {
                blogPosts = blogPosts.filter(p => p.id !== id);
                localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
                loadBlogList();
                showStatus('Post deleted successfully!', 'success');
            }
        }

        // Load blog list on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadBlogList();
        });
    </script>
</body>
</html>
